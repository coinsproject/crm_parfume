# Обновление до версии 1.2.0

## Что нового в версии 1.2.0

- ✅ Полная адаптация интерфейса для мобильных устройств (телефоны и планшеты)
- ✅ Адаптивное мобильное меню с бургер-кнопкой
- ✅ Оптимизация таблиц для мобильных экранов
- ✅ Улучшение форм для touch-устройств
- ✅ Автоматическое управление версиями и релиз-ноутсами
- ✅ API для создания версий программно

## Инструкция по обновлению на сервере

### Вариант 1: Автоматическое обновление (рекомендуется)

```bash
# Подключитесь к серверу по SSH
ssh adminuser@your-server

# Перейдите в директорию проекта
cd /opt/crm_parfume

# Запустите скрипт обновления
sudo ./update.sh
```

Скрипт автоматически:
1. Создаст резервную копию базы данных
2. Обновит код из Git
3. Применит миграции базы данных
4. Перезапустит контейнеры

### Вариант 2: Ручное обновление

```bash
# 1. Подключитесь к серверу
ssh adminuser@your-server

# 2. Перейдите в директорию проекта
cd /opt/crm_parfume

# 3. Создайте резервную копию БД
sudo docker-compose exec crm sqlite3 /app/data/crm.db ".backup /app/data/crm_backup_$(date +%Y%m%d_%H%M%S).db"

# 4. Обновите код
sudo git pull origin main

# 5. Примените миграции
sudo docker-compose exec crm alembic upgrade head

# 6. Перезапустите контейнеры
sudo docker-compose restart
```

## Проверка после обновления

1. Проверьте версию в интерфейсе (должна быть 1.2.0)
2. Проверьте работу на мобильном устройстве
3. Проверьте создание релиз-ноутсов через веб-интерфейс

## Откат (если что-то пошло не так)

```bash
# 1. Остановите контейнеры
sudo docker-compose stop

# 2. Восстановите БД из резервной копии
sudo cp ./data/crm_backup_YYYYMMDD_HHMMSS.db ./data/crm.db

# 3. Откатите код к предыдущей версии
sudo git checkout <предыдущий-коммит>

# 4. Перезапустите
sudo docker-compose restart
```

## Важные замечания

- ⚠️ Перед обновлением убедитесь, что есть резервная копия БД
- ⚠️ Миграции применяются автоматически и безопасны (не удаляют данные)
- ⚠️ После обновления проверьте работу критичных функций

## Контакты

При возникновении проблем проверьте логи:
```bash
sudo docker-compose logs crm --tail=100
```



